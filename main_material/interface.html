<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Career Compass - AI Resume Analysis with Live Job Matches</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            color: white;
            position: relative;
        }

        .reset-btn {
            position: absolute;
            top: 0;
            right: 0;
            background: rgba(255,255,255,0.1);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            display: none;
        }

        .reset-btn:hover {
            background: rgba(255,255,255,0.2);
            border-color: rgba(255,255,255,0.5);
            transform: translateY(-1px);
        }

        .header h1 {
            font-size: 2.8rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 0.5rem;
        }

        .input-options-container {
            margin-bottom: 2rem;
        }

        .upload-area {
            background: rgba(255,255,255,0.95);
            border-radius: 24px;
            padding: 3rem;
            margin-bottom: 1.5rem;
            text-align: center;
            border: 3px dashed #ddd;
            transition: all 0.3s ease;
            backdrop-filter: blur(20px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .upload-area.dragover {
            border-color: #4CAF50;
            background: rgba(255,255,255,1);
            transform: scale(1.02);
        }

        .upload-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .upload-text {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .upload-subtext {
            color: #666;
            margin-bottom: 2rem;
        }

        .file-input {
            display: none;
        }

        .upload-btn, .analyze-text-btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .upload-btn:hover, .analyze-text-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.4);
        }

        .upload-btn:active, .analyze-text-btn:active {
            transform: translateY(0);
        }

        .divider-container {
            display: flex;
            align-items: center;
            margin: 2rem 0;
            opacity: 0.6;
        }

        .divider-line {
            flex: 1;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
        }

        .divider-text {
            margin: 0 2rem;
            color: white;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .text-input-area {
            background: rgba(255,255,255,0.95);
            border-radius: 24px;
            padding: 3rem;
            backdrop-filter: blur(20px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .text-input-icon {
            font-size: 3rem;
            text-align: center;
            margin-bottom: 1rem;
        }

        .text-input-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .text-input-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }

        .text-input-subtitle {
            color: #666;
            font-size: 1rem;
        }

        .resume-text-area {
            width: 100%;
            min-height: 300px;
            padding: 1.5rem;
            border: 2px solid #e0e0e0;
            border-radius: 16px;
            font-family: 'Inter', sans-serif;
            font-size: 0.95rem;
            line-height: 1.5;
            resize: vertical;
            background: white;
            transition: border-color 0.3s ease;
            margin-bottom: 2rem;
        }

        .resume-text-area:focus {
            outline: none;
            border-color: #2196F3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }

        .analyze-text-btn {
            background: linear-gradient(135deg, #2196F3, #1976D2);
            display: block;
            margin: 0 auto;
            min-width: 250px;
            padding: 1.2rem 3rem;
            border-radius: 50px;
            font-size: 1.2rem;
        }

        .progress-section {
            background: rgba(255,255,255,0.95);
            border-radius: 24px;
            padding: 2rem;
            margin-bottom: 2rem;
            display: none;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: #e0e0e0;
            border-radius: 6px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #45a049);
            width: 0%;
            transition: width 0.5s ease;
        }

        .progress-text {
            text-align: center;
            font-weight: 600;
            color: #333;
        }

        .results-section {
            display: none;
            background: rgba(255,255,255,0.95);
            border-radius: 24px;
            padding: 3rem;
        }

        .personalized-tips {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 8px;
        }

        .personalized-tips h3 {
            color: #856404;
            margin-bottom: 1rem;
        }

        .tip-item {
            margin: 0.8rem 0;
            padding-left: 1.5rem;
            position: relative;
            color: #856404;
        }

        .tip-item::before {
            content: "💡";
            position: absolute;
            left: 0;
        }

        .filter-section {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 2rem;
        }

        .filter-row {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .filter-item {
            flex: 1;
            min-width: 200px;
        }

        .filter-label {
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: block;
        }

        .filter-select {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }

        .job-matches-section {
            margin: 3rem 0;
            padding: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 16px;
            color: white;
        }

        .job-matches-section h2 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .job-listing {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            color: #333;
            transition: all 0.3s ease;
            border-left: 4px solid #4CAF50;
        }

        .job-listing:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .job-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1rem;
        }

        .job-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 0.3rem;
        }

        .job-company {
            font-size: 1rem;
            color: #666;
        }

        .job-match-score {
            background: #4CAF50;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .job-details {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin: 1rem 0;
        }

        .job-detail-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #666;
            font-size: 0.9rem;
        }

        .job-description {
            color: #555;
            line-height: 1.6;
            margin: 1rem 0;
        }

        .job-skills {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .skill-tag {
            background: #e3f2fd;
            color: #1976d2;
            padding: 0.3rem 0.8rem;
            border-radius: 16px;
            font-size: 0.85rem;
        }

        .job-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .apply-btn, .save-btn {
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            border: none;
        }

        .apply-btn {
            background: #4CAF50;
            color: white;
        }

        .apply-btn:hover {
            background: #45a049;
            transform: translateY(-1px);
        }

        .save-btn {
            background: white;
            color: #4CAF50;
            border: 2px solid #4CAF50;
        }

        .error-message {
            background: #ffebee;
            color: #c62828;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <button type="button" class="reset-btn" id="reset-btn">🔄 Start Over</button>
            <h1>Career Compass</h1>
            <p>AI-Powered Resume Analysis with Live Job Matches</p>
        </div>

        <div class="input-options-container">
            <div class="upload-area" id="upload-area">
                <div class="upload-icon">📄</div>
                <div class="upload-text">Upload Your Resume PDF</div>
                <div class="upload-subtext">Drag and drop or click the button below</div>
                <button type="button" class="upload-btn" id="upload-btn">Choose PDF File</button>
                <input type="file" id="file-input" class="file-input" accept=".pdf" />
            </div>

            <div class="divider-container">
                <div class="divider-line"></div>
                <div class="divider-text">OR</div>
                <div class="divider-line"></div>
            </div>

            <div class="text-input-area">
                <div class="text-input-icon">📝</div>
                <div class="text-input-header">
                    <div class="text-input-title">Paste Your Resume Text</div>
                    <div class="text-input-subtitle">Copy and paste your resume content</div>
                </div>
                <textarea id="resume-text-input" class="resume-text-area" placeholder="Paste your resume here...

John Doe
john.doe@email.com | (555) 123-4567
San Francisco, CA

SOFTWARE ENGINEER
..."></textarea>
                <button type="button" class="analyze-text-btn" id="analyze-btn">Analyze Resume Text</button>
            </div>
        </div>

        <div class="progress-section" id="progress-section">
            <div class="progress-text" id="progress-text">Processing...</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
        </div>

        <div class="profile-review-section" id="profile-review-section" style="display: none;">
            <div style="background: rgba(255,255,255,0.95); border-radius: 24px; padding: 3rem; margin-bottom: 2rem;">
                <h2 style="text-align: center; color: #2c3e50; margin-bottom: 1rem;">Review Your Extracted Profile</h2>
                <p style="text-align: center; color: #666; margin-bottom: 2rem;">AI has analyzed your resume. Please review and adjust before finding job matches.</p>
                
                <div id="career-suggestions" style="background: #e8f4fd; border-left: 4px solid #2196F3; padding: 1.5rem; margin-bottom: 2rem; border-radius: 8px; display: none;">
                    <h3 style="color: #1565c0; margin-bottom: 1rem; font-size: 1.2rem;">Resume Improvement Suggestions</h3>
                    <div id="suggestions-content" style="color: #424242; line-height: 1.6;"></div>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                    <div>
                        <label style="font-weight: 600; color: #2c3e50; display: block; margin-bottom: 0.5rem;">Your Name</label>
                        <input type="text" id="profile-name" style="width: 100%; padding: 0.8rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem;">
                    </div>
                    
                    <div>
                        <label style="font-weight: 600; color: #2c3e50; display: block; margin-bottom: 0.5rem;">Location</label>
                        <input type="text" id="profile-location" style="width: 100%; padding: 0.8rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem;">
                    </div>
                    
                    <div>
                        <label style="font-weight: 600; color: #2c3e50; display: block; margin-bottom: 0.5rem;">Experience Level</label>
                        <select id="profile-experience" style="width: 100%; padding: 0.8rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem;">
                            <option value="entry">Entry Level (0-2 years)</option>
                            <option value="mid">Mid Level (3-7 years)</option>
                            <option value="senior">Senior Level (8+ years)</option>
                        </select>
                    </div>
                    
                    <div>
                        <label style="font-weight: 600; color: #2c3e50; display: block; margin-bottom: 0.5rem;">Target Salary Range</label>
                        <input type="text" id="profile-salary" style="width: 100%; padding: 0.8rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem;">
                    </div>
                    
                    <div style="grid-column: 1 / -1;">
                        <label style="font-weight: 600; color: #2c3e50; display: block; margin-bottom: 0.5rem;">Career Field</label>
                        <select id="profile-career-field" style="width: 100%; padding: 0.8rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem;">
                            <option value="">Select Career Field</option>
                            <option value="Accountant">Accountant</option>
                            <option value="Advocate">Advocate</option>
                            <option value="Agriculture">Agriculture</option>
                            <option value="Apparel">Apparel</option>
                            <option value="Arts">Arts</option>
                            <option value="Automobile">Automobile</option>
                            <option value="Aviation">Aviation</option>
                            <option value="Banking">Banking</option>
                            <option value="BOP">Business Operations (BOP)</option>
                            <option value="Business-Development">Business Development</option>
                            <option value="Chef">Chef</option>
                            <option value="Construction">Construction</option>
                            <option value="Designer">Designer</option>
                            <option value="Digital-Media">Digital Media</option>
                            <option value="Engineering">Engineering</option>
                            <option value="Finance">Finance</option>
                            <option value="Fitness">Fitness</option>
                            <option value="Healthcare">Healthcare</option>
                            <option value="HR">Human Resources</option>
                            <option value="IT">Information Technology</option>
                            <option value="PR">Public Relations</option>
                            <option value="Sales">Sales</option>
                            <option value="Teacher">Teacher</option>
                        </select>
                    </div>
                    
                    <div style="grid-column: 1 / -1;">
                        <label style="font-weight: 600; color: #2c3e50; display: block; margin-bottom: 0.5rem;">Target Roles (comma-separated)</label>
                        <input type="text" id="profile-roles" style="width: 100%; padding: 0.8rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem;">
                    </div>
                    
                    <div style="grid-column: 1 / -1;">
                        <label style="font-weight: 600; color: #2c3e50; display: block; margin-bottom: 0.5rem;">Skills (comma-separated)</label>
                        <input type="text" id="profile-skills" style="width: 100%; padding: 0.8rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem;">
                    </div>
                </div>
                
                <button type="button" id="confirm-profile-btn" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 1.2rem 3rem; border-radius: 50px; font-size: 1.2rem; font-weight: 600; cursor: pointer; display: block; margin: 2rem auto 0; min-width: 250px;">
                    Find Job Matches
                </button>
            </div>
        </div>

        <div class="results-section" id="results-section">
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 16px; padding: 2rem; margin-bottom: 2rem;">
                <h2 style="text-align: center; margin-bottom: 1.5rem;">Resume Analysis Summary</h2>
                <div id="profile-display" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;"></div>
            </div>

            <div style="text-align: center; margin-bottom: 3rem;">
                <div id="market-score" style="display: inline-block; background: linear-gradient(135deg, #4CAF50, #45a049); color: white; padding: 1.5rem 3rem; border-radius: 50px; font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem;">
                    Market Readiness: --/10
                </div>
                <div id="score-description" style="color: #666; font-size: 1rem;">
                    Overall competitiveness for target roles
                </div>
            </div>

            <div id="analysis-sections" style="display: grid; gap: 2rem; margin-bottom: 3rem;"></div>

            <div class="personalized-tips">
                <h3>Personalized Insights</h3>
                <div id="tips-content"></div>
            </div>

            <div class="filter-section">
                <h3 style="margin-bottom: 1rem;">Filter Jobs</h3>
                <div class="filter-row">
                    <div class="filter-item">
                        <label class="filter-label">Location</label>
                        <select class="filter-select" id="location-filter">
                            <option value="">All Locations</option>
                        </select>
                    </div>
                    <div class="filter-item">
                        <label class="filter-label">Job Type</label>
                        <select class="filter-select" id="type-filter">
                            <option value="">All Types</option>
                            <option value="Full-time">Full-time</option>
                            <option value="Remote">Remote</option>
                            <option value="Contract">Contract</option>
                        </select>
                    </div>
                    <div class="filter-item">
                        <label class="filter-label">Experience</label>
                        <select class="filter-select" id="experience-filter">
                            <option value="">All Levels</option>
                            <option value="entry">Entry</option>
                            <option value="mid">Mid</option>
                            <option value="senior">Senior</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="job-matches-section">
                <h2>Top Job Matches</h2>
                <div id="job-listings-container"></div>
            </div>
        </div>

        <div id="error-message" class="error-message"></div>
    </div>

    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

        let userProfile = {};
        let allJobs = [];
        let savedJobs = new Set();

        // BUTTON EVENT LISTENERS
        document.getElementById('upload-btn').addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            console.log('Upload button clicked');
            document.getElementById('file-input').click();
        });

        document.getElementById('analyze-btn').addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            console.log('Analyze button clicked');
            analyzeResumeText();
        });

        document.getElementById('file-input').addEventListener('change', function(e) {
            console.log('File input changed');
            handleFileUpload(e);
        });

        // Drag and drop
        const uploadArea = document.getElementById('upload-area');
        uploadArea.addEventListener('dragover', function(e) {
            e.preventDefault();
            e.stopPropagation();
            uploadArea.classList.add('dragover');
        });

        uploadArea.addEventListener('dragleave', function(e) {
            e.preventDefault();
            e.stopPropagation();
            uploadArea.classList.remove('dragover');
        });

        uploadArea.addEventListener('drop', function(e) {
            e.preventDefault();
            e.stopPropagation();
            uploadArea.classList.remove('dragover');
            
            const files = e.dataTransfer.files;
            if (files.length > 0 && files[0].type === 'application/pdf') {
                document.getElementById('file-input').files = files;
                handleFileUpload({ target: { files: files } });
            } else {
                showError('Please drop a PDF file');
            }
        });

        // Filter event listeners
        document.getElementById('location-filter').addEventListener('change', filterJobs);
        document.getElementById('type-filter').addEventListener('change', filterJobs);
        document.getElementById('experience-filter').addEventListener('change', filterJobs);

        document.getElementById('confirm-profile-btn').addEventListener('click', function(e) {
            e.preventDefault();
            confirmProfileAndFindJobs();
        });

        document.getElementById('reset-btn').addEventListener('click', function(e) {
            e.preventDefault();
            resetApplication();
        });

        // Event listener for career field changes
        document.getElementById('profile-career-field').addEventListener('change', function() {
            const selectedField = this.value;
            if (selectedField) {
                displayCareerSuggestions(selectedField);
            } else {
                document.getElementById('career-suggestions').style.display = 'none';
            }
        });

        async function handleFileUpload(event) {
            const file = event.target.files[0];
            
            console.log('Processing file:', file);
            
            if (!file) {
                console.log('No file selected');
                return;
            }
            
            if (file.type !== 'application/pdf') {
                showError('Please upload a PDF file');
                return;
            }

            document.querySelector('.input-options-container').style.display = 'none';
            showProgress();
            
            try {
                updateProgress(20, 'Reading PDF...');
                const resumeText = await extractTextFromPDF(file);
                
                if (resumeText.length < 50) {
                    throw new Error('Could not extract text from PDF');
                }
                
                updateProgress(50, 'Analyzing resume...');
                userProfile = await analyzeResume(resumeText);
                
                showProfileReview();
            } catch (error) {
                console.error('Error:', error);
                showError('Analysis failed: ' + error.message);
                document.querySelector('.input-options-container').style.display = 'block';
            } finally {
                hideProgress();
            }
        }

        async function analyzeResumeText() {
            const resumeText = document.getElementById('resume-text-input').value.trim();
            
            if (!resumeText || resumeText.length < 100) {
                showError('Please enter more resume content');
                return;
            }

            document.querySelector('.input-options-container').style.display = 'none';
            showProgress();
            
            try {
                updateProgress(30, 'Analyzing resume...');
                userProfile = await analyzeResume(resumeText);
                
                showProfileReview();
            } catch (error) {
                console.error('Error:', error);
                showError('Analysis failed: ' + error.message);
                document.querySelector('.input-options-container').style.display = 'block';
            } finally {
                hideProgress();
            }
        }

        function showProfileReview() {
            document.getElementById('profile-name').value = userProfile.name;
            document.getElementById('profile-location').value = userProfile.location;
            document.getElementById('profile-experience').value = userProfile.experience;
            document.getElementById('profile-salary').value = userProfile.salary;
            document.getElementById('profile-career-field').value = userProfile.careerField || '';
            document.getElementById('profile-roles').value = userProfile.roles.join(', ');
            document.getElementById('profile-skills').value = userProfile.skills.join(', ');
            
            // Show career-specific suggestions
            if (userProfile.careerField) {
                displayCareerSuggestions(userProfile.careerField);
            }
            
            showResetButton();
            document.getElementById('profile-review-section').style.display = 'block';
            document.getElementById('profile-review-section').scrollIntoView({ behavior: 'smooth' });
        }

        async function confirmProfileAndFindJobs() {
            userProfile.name = document.getElementById('profile-name').value;
            userProfile.location = document.getElementById('profile-location').value;
            userProfile.experience = document.getElementById('profile-experience').value;
            userProfile.salary = document.getElementById('profile-salary').value;
            userProfile.careerField = document.getElementById('profile-career-field').value;
            userProfile.roles = document.getElementById('profile-roles').value.split(',').map(r => r.trim());
            userProfile.skills = document.getElementById('profile-skills').value.split(',').map(s => s.trim());
            
            document.getElementById('profile-review-section').style.display = 'none';
            showProgress();
            
            try {
                updateProgress(50, 'Finding jobs...');
                await fetchJobMatches();
                
                updateProgress(80, 'Analyzing strengths...');
                await new Promise(resolve => setTimeout(resolve, 500));
                
                updateProgress(100, 'Complete!');
                displayResults();
            } catch (error) {
                showError('Error: ' + error.message);
            } finally {
                setTimeout(hideProgress, 500);
            }
        }

        async function extractTextFromPDF(file) {
            try {
                const arrayBuffer = await file.arrayBuffer();
                const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
                let fullText = '';

                for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {
                    const page = await pdf.getPage(pageNum);
                    const textContent = await page.getTextContent();
                    const pageText = textContent.items.map(item => item.str).join(' ');
                    fullText += pageText + '\n';
                }

                return fullText.trim();
            } catch (error) {
                throw new Error('PDF reading failed: ' + error.message);
            }
        }

        async function analyzeResume(resumeText) {
            await new Promise(resolve => setTimeout(resolve, 800));
            
            const careerField = detectCareerField(resumeText);
            
            return {
                name: extractName(resumeText),
                skills: extractSkills(resumeText),
                experience: determineExperienceLevel(resumeText),
                roles: extractRoles(resumeText),
                location: extractLocation(resumeText),
                salary: estimateSalary(resumeText),
                careerField: careerField
            };
        }

        function extractName(text) {
            const lines = text.split('\n').map(l => l.trim()).filter(l => l);
            
            for (let i = 0; i < Math.min(5, lines.length); i++) {
                const line = lines[i];
                
                if (line.includes('@') || line.match(/\d{3}/) || line.toLowerCase().includes('linkedin')) {
                    continue;
                }
                
                const words = line.split(/\s+/);
                if (words.length >= 2 && words.length <= 4 && 
                    words.every(w => /^[A-Z][a-z]+/.test(w)) &&
                    !line.match(/\d/)) {
                    return line;
                }
            }
            
            return 'Candidate';
        }

        function extractLocation(text) {
            const lines = text.split('\n').map(l => l.trim()).filter(l => l);
            const searchText = lines.slice(1).join('\n');
            
            const match = searchText.match(/([A-Z][a-z]+(?:\s+[A-Z][a-z]+)*),\s*([A-Z]{2})\b/);
            if (match && !match[0].includes('@')) {
                return match[0];
            }
            
            if (/\b(remote|wfh)\b/i.test(text)) {
                return 'Remote';
            }
            
            return 'Not Specified';
        }

        function extractSkills(text) {
            const skills = ['Python', 'JavaScript', 'Java', 'React', 'Node.js', 'SQL', 
                           'Excel', 'AWS', 'Docker', 'Git', 'Leadership', 'Communication'];
            return skills.filter(skill => new RegExp(`\\b${skill}\\b`, 'i').test(text));
        }

        function determineExperienceLevel(text) {
            const yearMatch = text.match(/(\d+)\+?\s*years?\s*(?:of\s*)?(?:experience|exp)/i);
            if (yearMatch) {
                const years = parseInt(yearMatch[1]);
                if (years <= 2) return 'entry';
                if (years <= 7) return 'mid';
                return 'senior';
            }
            return 'mid';
        }

        function extractRoles(text) {
            const roles = ['Software Engineer', 'Developer', 'Data Analyst', 'Project Manager'];
            const found = roles.filter(role => new RegExp(`\\b${role}\\b`, 'i').test(text));
            return found.length > 0 ? found : ['Software Developer'];
        }

        function detectCareerField(text) {
            const careerKeywords = {
                'Accountant': ['accountant', 'accounting', 'cpa', 'audit', 'bookkeeping', 'tax preparation'],
                'Advocate': ['lawyer', 'attorney', 'legal', 'litigation', 'law firm', 'bar association'],
                'Agriculture': ['agriculture', 'farming', 'agronomy', 'crop', 'livestock', 'agricultural'],
                'Apparel': ['fashion', 'apparel', 'textile', 'garment', 'clothing', 'fashion design'],
                'Arts': ['artist', 'painter', 'sculptor', 'gallery', 'fine arts', 'creative arts'],
                'Automobile': ['automotive', 'mechanic', 'car', 'vehicle', 'auto repair'],
                'Aviation': ['aviation', 'pilot', 'aircraft', 'airline', 'flight', 'aerospace'],
                'Banking': ['bank', 'banking', 'teller', 'loan officer', 'financial institution'],
                'BOP': ['business operations', 'operations manager', 'bop', 'process improvement'],
                'Business-Development': ['business development', 'bd', 'partnerships', 'strategic growth'],
                'Chef': ['chef', 'cook', 'culinary', 'kitchen', 'restaurant', 'food preparation'],
                'Construction': ['construction', 'builder', 'contractor', 'civil engineering', 'site manager'],
                'Designer': ['designer', 'graphic design', 'ux', 'ui', 'product design', 'creative director'],
                'Digital-Media': ['digital media', 'content creator', 'social media', 'multimedia'],
                'Engineering': ['engineer', 'engineering', 'mechanical', 'electrical', 'civil', 'technical'],
                'Finance': ['finance', 'financial analyst', 'investment', 'portfolio', 'cfa'],
                'Fitness': ['fitness', 'trainer', 'gym', 'health coach', 'personal training'],
                'Healthcare': ['healthcare', 'nurse', 'doctor', 'medical', 'hospital', 'clinical'],
                'HR': ['human resources', 'hr', 'recruiter', 'talent acquisition', 'employee relations'],
                'IT': ['software', 'developer', 'programmer', 'it', 'technology', 'computer science'],
                'PR': ['public relations', 'pr', 'communications', 'media relations'],
                'Sales': ['sales', 'account executive', 'business development', 'sales manager'],
                'Teacher': ['teacher', 'educator', 'professor', 'instructor', 'education']
            };
            
            const textLower = text.toLowerCase();
            let maxMatches = 0;
            let detectedField = '';
            
            for (const [field, keywords] of Object.entries(careerKeywords)) {
                const matches = keywords.filter(keyword => textLower.includes(keyword)).length;
                if (matches > maxMatches) {
                    maxMatches = matches;
                    detectedField = field;
                }
            }
            
            return detectedField || 'IT';
        }

        function estimateSalary(text) {
            const exp = determineExperienceLevel(text);
            const ranges = {
                'entry': '$50,000 - $75,000',
                'mid': '$75,000 - $110,000',
                'senior': '$110,000 - $160,000'
            };
            return ranges[exp];
        }

        async function fetchJobMatches() {
            await new Promise(resolve => setTimeout(resolve, 1000));
            allJobs = generateJobs(userProfile);
        }

        function generateJobs(profile) {
            const jobs = [];
            const roles = profile.roles.length > 0 ? profile.roles : ['Software Developer'];
            
            roles.forEach((role, idx) => {
                for (let i = 0; i < 4; i++) {
                    jobs.push({
                        id: jobs.length + 1,
                        title: `${i % 2 === 0 ? 'Senior' : ''} ${role}`.trim(),
                        company: ['TechCorp', 'InnovateLabs', 'DataSystems', 'CloudWorks'][i],
                        location: i % 3 === 0 ? profile.location : 'Remote',
                        type: ['Full-time', 'Remote', 'Full-time', 'Contract'][i % 4],
                        salary: profile.salary,
                        matchScore: 95 - (idx * 5) - (i * 3),
                        description: `Join our team as a ${role}. Work on exciting projects with cutting-edge technology.`,
                        skills: profile.skills.slice(0, 5),
                        posted: `${i + 1} days ago`,
                        applicants: 10 + Math.floor(Math.random() * 40),
                        url: `https://www.indeed.com/jobs?q=${encodeURIComponent(role)}&l=${encodeURIComponent(profile.location)}`,
                        experience: profile.experience
                    });
                }
            });

            return jobs.sort((a, b) => b.matchScore - a.matchScore);
        }

        function displayResults() {
            // Display profile summary
            document.getElementById('profile-display').innerHTML = `
                <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px;">
                    <strong style="opacity: 0.8; font-size: 0.9rem;">Name</strong>
                    <div style="font-size: 1.1rem; font-weight: 600;">${userProfile.name}</div>
                </div>
                <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px;">
                    <strong style="opacity: 0.8; font-size: 0.9rem;">Location</strong>
                    <div style="font-size: 1.1rem; font-weight: 600;">${userProfile.location}</div>
                </div>
                <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px;">
                    <strong style="opacity: 0.8; font-size: 0.9rem;">Experience</strong>
                    <div style="font-size: 1.1rem; font-weight: 600;">${userProfile.experience.charAt(0).toUpperCase() + userProfile.experience.slice(1)} Level</div>
                </div>
                <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px;">
                    <strong style="opacity: 0.8; font-size: 0.9rem;">Target Salary</strong>
                    <div style="font-size: 1.1rem; font-weight: 600;">${userProfile.salary}</div>
                </div>
            `;

            // Calculate and display market score
            const marketScore = calculateMarketScore(userProfile);
            document.getElementById('market-score').textContent = `Market Readiness: ${marketScore}/10`;
            
            let scoreDesc = '';
            if (marketScore >= 8) scoreDesc = 'Excellent - Highly competitive for target roles';
            else if (marketScore >= 6) scoreDesc = 'Good - Strong candidate with room for improvement';
            else scoreDesc = 'Developing - Focus on skill building and experience';
            
            document.getElementById('score-description').textContent = scoreDesc;

            // Display analysis sections with scores
            const analysisSections = generateAnalysisSections(userProfile, marketScore);
            document.getElementById('analysis-sections').innerHTML = analysisSections.map((section, idx) => `
                <div style="background: white; border-radius: 16px; padding: 2rem; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border-left: 4px solid ${getColorForIndex(idx)};">
                    <div style="display: flex; align-items: center; margin-bottom: 1.5rem;">
                        <div style="font-size: 2rem; margin-right: 1rem;">${section.icon}</div>
                        <div style="flex: 1;">
                            <div style="font-size: 1.4rem; font-weight: 700; color: #2c3e50;">${section.title}</div>
                        </div>
                        <div style="background: #e8f5e8; color: #2e7d32; padding: 0.5rem 1rem; border-radius: 20px; font-weight: 600;">
                            ${section.score}/10
                        </div>
                    </div>
                    <div style="color: #555; line-height: 1.6;">${section.content}</div>
                </div>
            `).join('');
            
            const tips = [
                `Hello ${userProfile.name}! Found ${userProfile.skills.length} relevant skills`,
                `${allJobs.filter(j => j.matchScore >= 90).length} excellent job matches (90%+)`,
                `Your ${userProfile.experience} level experience aligns well with available positions`,
                `Salary range ${userProfile.salary} is competitive for ${userProfile.location}`
            ];
            
            document.getElementById('tips-content').innerHTML = tips.map(tip => 
                `<div class="tip-item">${tip}</div>`
            ).join('');

            const locations = [...new Set(allJobs.map(j => j.location))];
            const locationFilter = document.getElementById('location-filter');
            locationFilter.innerHTML = '<option value="">All Locations</option>';
            locations.forEach(loc => {
                locationFilter.innerHTML += `<option value="${loc}">${loc}</option>`;
            });

            displayJobs(allJobs);
            document.getElementById('results-section').style.display = 'block';
            document.getElementById('results-section').scrollIntoView({ behavior: 'smooth' });
        }

        function calculateMarketScore(profile) {
            let score = 5; // Base score
            
            // Skills bonus
            if (profile.skills.length >= 8) score += 2;
            else if (profile.skills.length >= 5) score += 1;
            else if (profile.skills.length < 3) score -= 1;
            
            // Experience level bonus
            if (profile.experience === 'mid' || profile.experience === 'senior') score += 1.5;
            else if (profile.experience === 'entry') score += 0.5;
            
            // Location bonus
            if (profile.location !== 'Not Specified' && profile.location !== 'Location Not Specified') score += 0.5;
            
            // Roles clarity
            if (profile.roles.length >= 2 && profile.roles.length <= 5) score += 1;
            
            return Math.min(10, Math.max(1, Math.round(score * 10) / 10));
        }

        function generateAnalysisSections(profile, marketScore) {
            return [
                {
                    icon: '🎯',
                    title: 'Target Role Fit',
                    score: Math.min(10, marketScore + 1),
                    content: `Your profile aligns well with ${profile.roles[0]} positions. With ${profile.skills.length} relevant skills and ${profile.experience} level experience, you're a competitive candidate. Focus on highlighting your accomplishments and quantifiable results in applications.`
                },
                {
                    icon: '⚡',
                    title: 'Skills Assessment',
                    score: Math.min(10, profile.skills.length >= 6 ? 8 : 6),
                    content: `Key skills identified: ${profile.skills.slice(0, 5).join(', ')}. These are valuable in the current market. Consider adding complementary skills like cloud technologies or agile methodologies to strengthen your profile further.`
                },
                {
                    icon: '💼',
                    title: 'Experience Level',
                    score: profile.experience === 'mid' ? 8 : profile.experience === 'senior' ? 9 : 7,
                    content: `Your ${profile.experience} level experience positions you well for ${profile.roles[0]} roles. ${profile.experience === 'senior' ? 'Emphasize leadership and strategic contributions.' : profile.experience === 'entry' ? 'Focus on projects, education, and eagerness to learn.' : 'Highlight your proven track record and growing expertise.'}`
                },
                {
                    icon: '💰',
                    title: 'Salary Expectations',
                    score: 8,
                    content: `Target range of ${profile.salary} is realistic for ${profile.experience} level ${profile.roles[0]} positions in ${profile.location}. This aligns well with current market rates and gives you good negotiation positioning.`
                },
                {
                    icon: '🚀',
                    title: 'Career Growth Potential',
                    score: Math.min(10, marketScore + 0.5),
                    content: `Strong potential for advancement in your field. Focus on continuous learning, networking, and taking on challenging projects. Consider pursuing relevant certifications to accelerate your career trajectory.`
                }
            ];
        }

        function getColorForIndex(idx) {
            const colors = ['#4CAF50', '#2196F3', '#FF9800', '#9C27B0', '#F44336', '#00BCD4'];
            return colors[idx % colors.length];
        }

        function displayJobs(jobs) {
            const container = document.getElementById('job-listings-container');
            
            if (jobs.length === 0) {
                container.innerHTML = '<p style="text-align:center;color:white;">No jobs found</p>';
                return;
            }

            container.innerHTML = jobs.map(job => `
                <div class="job-listing">
                    <div class="job-header">
                        <div>
                            <div class="job-title">${job.title}</div>
                            <div class="job-company">${job.company}</div>
                        </div>
                        <div class="job-match-score">${job.matchScore}% Match</div>
                    </div>
                    
                    <div class="job-details">
                        <div class="job-detail-item">📍 ${job.location}</div>
                        <div class="job-detail-item">💼 ${job.type}</div>
                        <div class="job-detail-item">💰 ${job.salary}</div>
                        <div class="job-detail-item">⏰ ${job.posted}</div>
                    </div>

                    <div class="job-description">${job.description}</div>

                    <div class="job-skills">
                        ${job.skills.map(skill => `<span class="skill-tag">${skill}</span>`).join('')}
                    </div>

                    <div class="job-actions">
                        <a href="${job.url}" target="_blank" class="apply-btn">Apply Now</a>
                        <button class="save-btn" onclick="saveJob(${job.id})">
                            ${savedJobs.has(job.id) ? 'Saved' : 'Save Job'}
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function filterJobs() {
            const loc = document.getElementById('location-filter').value;
            const type = document.getElementById('type-filter').value;
            const exp = document.getElementById('experience-filter').value;

            const filtered = allJobs.filter(job => {
                return (!loc || job.location === loc) &&
                       (!type || job.type === type) &&
                       (!exp || job.experience === exp);
            });

            displayJobs(filtered);
        }

        function saveJob(jobId) {
            if (savedJobs.has(jobId)) {
                savedJobs.delete(jobId);
            } else {
                savedJobs.add(jobId);
            }
            filterJobs();
        }

        function showProgress() {
            document.getElementById('progress-section').style.display = 'block';
        }

        function hideProgress() {
            document.getElementById('progress-section').style.display = 'none';
        }

        function updateProgress(percentage, message) {
            document.getElementById('progress-fill').style.width = percentage + '%';
            document.getElementById('progress-text').textContent = message;
        }

        function showError(message) {
            const errorDiv = document.getElementById('error-message');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 5000);
        }

        function resetApplication() {
            // Reset all data
            userProfile = {};
            allJobs = [];
            savedJobs = new Set();
            
            // Reset form inputs
            document.getElementById('file-input').value = '';
            document.getElementById('resume-text-input').value = '';
            document.getElementById('profile-name').value = '';
            document.getElementById('profile-location').value = '';
            document.getElementById('profile-experience').value = 'mid';
            document.getElementById('profile-salary').value = '';
            document.getElementById('profile-career-field').value = '';
            document.getElementById('profile-roles').value = '';
            document.getElementById('profile-skills').value = '';
            
            // Hide all sections except input
            document.getElementById('profile-review-section').style.display = 'none';
            document.getElementById('progress-section').style.display = 'none';
            document.getElementById('results-section').style.display = 'none';
            document.getElementById('error-message').style.display = 'none';
            document.getElementById('reset-btn').style.display = 'none';
            
            // Show input options
            document.querySelector('.input-options-container').style.display = 'block';
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function showResetButton() {
            document.getElementById('reset-btn').style.display = 'block';
        }

        function displayCareerSuggestions(careerField) {
            const suggestions = {
                'Accountant': [
                    '<strong>Quantify achievements:</strong> Include specific numbers (e.g., "Reduced errors by 25%" or "Managed $2M+ budget")',
                    '<strong>Highlight certifications:</strong> Emphasize CPA, CMA, or other relevant credentials prominently',
                    '<strong>Technical skills:</strong> List accounting software (QuickBooks, SAP, Oracle) and advanced Excel skills',
                    '<strong>Compliance knowledge:</strong> Mention GAAP, tax regulations, and audit experience',
                    '<strong>Keywords:</strong> Include: financial reporting, reconciliation, accounts payable/receivable, tax preparation'
                ],
                'Advocate': [
                    '<strong>Case wins:</strong> Highlight successful cases, settlements, or favorable outcomes',
                    '<strong>Specialization:</strong> Clearly state your practice areas (corporate, criminal, family, etc.)',
                    '<strong>Bar admissions:</strong> List all state bars and court admissions prominently',
                    '<strong>Legal research:</strong> Emphasize research, writing, and analytical skills',
                    '<strong>Keywords:</strong> Include: litigation, legal research, contract negotiation, client advocacy, case management'
                ],
                'Agriculture': [
                    '<strong>Practical experience:</strong> Detail hands-on farming, crop management, or livestock experience',
                    '<strong>Technical knowledge:</strong> Mention precision agriculture, irrigation systems, or agricultural technology',
                    '<strong>Certifications:</strong> Include pesticide applicator licenses, organic certifications, or agricultural degrees',
                    '<strong>Results-oriented:</strong> Show yield improvements, cost reductions, or sustainability achievements',
                    '<strong>Keywords:</strong> Include: crop production, soil management, agricultural equipment, farm operations'
                ],
                'Apparel': [
                    '<strong>Portfolio link:</strong> Include a link to your design portfolio or lookbook',
                    '<strong>Technical skills:</strong> List CAD software, pattern-making, textile knowledge',
                    '<strong>Brand experience:</strong> Mention well-known brands or designers you\'ve worked with',
                    '<strong>Trend awareness:</strong> Show knowledge of current fashion trends and market demands',
                    '<strong>Keywords:</strong> Include: fashion design, textile selection, garment construction, trend forecasting'
                ],
                'Arts': [
                    '<strong>Portfolio essential:</strong> Include a prominent link to your online portfolio or website',
                    '<strong>Exhibitions:</strong> List galleries, shows, or exhibitions where your work was featured',
                    '<strong>Awards/recognition:</strong> Highlight any grants, residencies, or artistic achievements',
                    '<strong>Medium expertise:</strong> Clearly state your primary mediums and techniques',
                    '<strong>Keywords:</strong> Include: visual arts, creative process, exhibition, art direction, commission work'
                ],
                'Automobile': [
                    '<strong>ASE certifications:</strong> Prominently display automotive certifications',
                    '<strong>Diagnostic skills:</strong> Emphasize ability to diagnose and repair complex vehicle issues',
                    '<strong>Tool proficiency:</strong> List specialized automotive tools and diagnostic equipment',
                    '<strong>Vehicle specialization:</strong> Note if you specialize in specific makes or systems',
                    '<strong>Keywords:</strong> Include: automotive repair, diagnostics, preventive maintenance, vehicle systems'
                ],
                'Aviation': [
                    '<strong>Licenses/ratings:</strong> List all pilot licenses, ratings, and endorsements prominently',
                    '<strong>Flight hours:</strong> Include total flight hours and hours by aircraft type',
                    '<strong>Safety record:</strong> Mention clean safety record and adherence to regulations',
                    '<strong>Aircraft types:</strong> Specify experience with different aircraft models',
                    '<strong>Keywords:</strong> Include: flight operations, aviation safety, FAA regulations, aircraft systems'
                ],
                'Banking': [
                    '<strong>Financial metrics:</strong> Include loan amounts processed, accounts managed, or sales targets met',
                    '<strong>Compliance:</strong> Emphasize knowledge of banking regulations and risk management',
                    '<strong>Customer service:</strong> Highlight customer satisfaction scores or relationship building',
                    '<strong>Product knowledge:</strong> Show expertise in banking products and financial services',
                    '<strong>Keywords:</strong> Include: financial services, customer relations, loan processing, banking operations'
                ],
                'BOP': [
                    '<strong>Process improvements:</strong> Quantify efficiency gains or cost savings achieved',
                    '<strong>Systems implementation:</strong> Highlight experience with ERP, CRM, or other operational systems',
                    '<strong>Cross-functional leadership:</strong> Show ability to coordinate across departments',
                    '<strong>Metrics-driven:</strong> Include KPIs you\'ve tracked and improved',
                    '<strong>Keywords:</strong> Include: operations management, process optimization, workflow efficiency, project management'
                ],
                'Business-Development': [
                    '<strong>Revenue impact:</strong> Quantify deals closed, revenue generated, or partnerships established',
                    '<strong>Pipeline management:</strong> Show ability to build and manage sales pipeline',
                    '<strong>Relationship building:</strong> Emphasize networking and stakeholder management skills',
                    '<strong>Market analysis:</strong> Highlight strategic planning and market research capabilities',
                    '<strong>Keywords:</strong> Include: business development, strategic partnerships, revenue growth, market expansion'
                ],
                'Chef': [
                    '<strong>Cuisine expertise:</strong> Clearly state your culinary specialties and styles',
                    '<strong>Kitchen management:</strong> Highlight team leadership and kitchen operations experience',
                    '<strong>Menu development:</strong> Showcase creativity in menu design and food costing',
                    '<strong>Volume/quality:</strong> Mention capacity (covers per night) and quality standards maintained',
                    '<strong>Keywords:</strong> Include: culinary arts, menu planning, food preparation, kitchen management, food safety'
                ],
                'Construction': [
                    '<strong>Project scale:</strong> Include budget sizes and project types (residential, commercial, etc.)',
                    '<strong>Safety record:</strong> Emphasize OSHA compliance and accident-free days',
                    '<strong>Certifications:</strong> List relevant licenses (contractor\'s license, LEED, etc.)',
                    '<strong>On-time/budget:</strong> Highlight ability to complete projects on schedule and within budget',
                    '<strong>Keywords:</strong> Include: construction management, project planning, building codes, site supervision'
                ],
                'Designer': [
                    '<strong>Portfolio link:</strong> Make your portfolio the most prominent element',
                    '<strong>Software proficiency:</strong> List Adobe Creative Suite, Figma, Sketch, or other design tools',
                    '<strong>Design process:</strong> Show understanding of user-centered design and iterative processes',
                    '<strong>Measurable impact:</strong> Include metrics (increased engagement, conversion rates, etc.)',
                    '<strong>Keywords:</strong> Include: UI/UX design, visual design, prototyping, user research, design systems'
                ],
                'Digital-Media': [
                    '<strong>Analytics-driven:</strong> Show metrics (views, engagement, growth rates)',
                    '<strong>Platform expertise:</strong> Specify social media platforms and content management systems',
                    '<strong>Content portfolio:</strong> Link to published work, campaigns, or content samples',
                    '<strong>Audience growth:</strong> Quantify follower growth or engagement improvements',
                    '<strong>Keywords:</strong> Include: content creation, social media management, digital marketing, SEO, analytics'
                ],
                'Engineering': [
                    '<strong>Technical skills:</strong> List programming languages, CAD software, and engineering tools',
                    '<strong>Project outcomes:</strong> Quantify improvements (efficiency gains, cost reductions)',
                    '<strong>Certifications:</strong> Include PE license, Six Sigma, or relevant engineering certifications',
                    '<strong>Problem-solving:</strong> Highlight complex technical problems solved',
                    '<strong>Keywords:</strong> Include: engineering design, technical analysis, product development, testing, documentation'
                ],
                'Finance': [
                    '<strong>Quantitative results:</strong> Include ROI improvements, cost savings, or portfolio performance',
                    '<strong>Financial modeling:</strong> Emphasize modeling, forecasting, and analytical skills',
                    '<strong>Certifications:</strong> Highlight CFA, CPA, or other financial credentials',
                    '<strong>Tools expertise:</strong> List Excel, Bloomberg, financial software proficiency',
                    '<strong>Keywords:</strong> Include: financial analysis, investment management, risk assessment, financial modeling'
                ],
                'Fitness': [
                    '<strong>Certifications:</strong> List all fitness certifications (ACE, NASM, ACSM, etc.)',
                    '<strong>Client results:</strong> Include success stories or transformation metrics',
                    '<strong>Specializations:</strong> Note areas like strength training, yoga, nutrition, etc.',
                    '<strong>Program design:</strong> Show ability to create customized fitness programs',
                    '<strong>Keywords:</strong> Include: personal training, fitness coaching, exercise programming, client motivation'
                ],
                'Healthcare': [
                    '<strong>Licenses/credentials:</strong> Prominently display RN, MD, or other healthcare licenses',
                    '<strong>Patient care:</strong> Emphasize patient outcomes and quality of care metrics',
                    '<strong>Specializations:</strong> Clearly state medical specialties or areas of expertise',
                    '<strong>Compliance:</strong> Mention HIPAA knowledge and healthcare regulations',
                    '<strong>Keywords:</strong> Include: patient care, medical procedures, healthcare compliance, clinical skills'
                ],
                'HR': [
                    '<strong>Metrics-driven:</strong> Include time-to-hire, retention rates, or employee satisfaction scores',
                    '<strong>HRIS systems:</strong> List experience with Workday, SAP, ADP, or other HR systems',
                    '<strong>Certifications:</strong> Highlight SHRM-CP, PHR, or other HR credentials',
                    '<strong>Full-cycle recruiting:</strong> Show end-to-end HR process experience',
                    '<strong>Keywords:</strong> Include: talent acquisition, employee relations, HRIS, performance management, compensation'
                ],
                'IT': [
                    '<strong>Technical stack:</strong> List all programming languages, frameworks, and technologies',
                    '<strong>Certifications:</strong> Include AWS, Azure, CompTIA, Cisco, or other IT certifications',
                    '<strong>Project impact:</strong> Quantify system improvements, uptime, or performance gains',
                    '<strong>GitHub/portfolio:</strong> Link to your code repositories or technical blog',
                    '<strong>Keywords:</strong> Include: software development, cloud computing, cybersecurity, database management, DevOps'
                ],
                'PR': [
                    '<strong>Media placements:</strong> Highlight coverage in major publications or broadcast media',
                    '<strong>Campaign results:</strong> Include metrics (impressions, reach, sentiment improvements)',
                    '<strong>Crisis management:</strong> Show experience handling sensitive communications',
                    '<strong>Relationship building:</strong> Emphasize media contacts and stakeholder relationships',
                    '<strong>Keywords:</strong> Include: public relations, media relations, press releases, crisis communication, brand management'
                ],
                'Sales': [
                    '<strong>Quota achievement:</strong> Show percentage over quota or sales targets met',
                    '<strong>Revenue numbers:</strong> Include specific dollar amounts closed or pipeline value',
                    '<strong>Deal size/cycle:</strong> Mention average deal size and sales cycle length',
                    '<strong>CRM proficiency:</strong> List Salesforce, HubSpot, or other sales tools',
                    '<strong>Keywords:</strong> Include: sales strategy, business development, client acquisition, account management, pipeline management'
                ],
                'Teacher': [
                    '<strong>Certifications/licenses:</strong> Prominently display teaching licenses and endorsements',
                    '<strong>Student outcomes:</strong> Include test score improvements or achievement metrics',
                    '<strong>Curriculum development:</strong> Show ability to design engaging lessons and curricula',
                    '<strong>Subject expertise:</strong> Clearly state subjects and grade levels taught',
                    '<strong>Keywords:</strong> Include: curriculum development, classroom management, student assessment, differentiated instruction'
                ]
            };
            
            const suggestionsList = suggestions[careerField] || suggestions['IT'];
            const suggestionsHTML = `
                <div style="margin-bottom: 1rem;">
                    <strong style="font-size: 1.05rem;">Detected Career Field: ${careerField}</strong>
                </div>
                <div style="margin-bottom: 0.5rem;">To strengthen your resume in this field:</div>
                <ul style="margin-left: 1.5rem; line-height: 1.8;">
                    ${suggestionsList.map(tip => `<li>${tip}</li>`).join('')}
                </ul>
            `;
            
            document.getElementById('suggestions-content').innerHTML = suggestionsHTML;
            document.getElementById('career-suggestions').style.display = 'block';
        }
    </script>
</body>
</html>
